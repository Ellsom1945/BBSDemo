{"version":3,"sources":["webpack:///./src/views/community.vue?b223","webpack:///src/views/community.vue","webpack:///./src/views/community.vue?d83c","webpack:///./src/views/community.vue","webpack:///./src/components/writeCard/WriteCard.vue?0e4f","webpack:///./src/views/community.vue?fb63","webpack:///./src/components/writeCard/WriteCard.vue?aa4a","webpack:///src/components/writeCard/WriteCard.vue","webpack:///./src/components/writeCard/WriteCard.vue?7cc8","webpack:///./src/components/writeCard/WriteCard.vue","webpack:///./src/assets/img/defaultAvatar.jpg","webpack:///./src/plugins/utils.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","writeArticle","_v","class","$route","query","typeId","$event","changeType","_l","item","index","key","_s","typeName","directives","name","rawName","value","expression","$router","push","params","id","articleId","avatar","articleTitle","_f","createTime","domProps","handleMarkDown","articleContent","articleImage","_e","commentNum","articleList","length","isDataLoad","totalCount","page","changePage","isWriteCardShow","reFreshArticleList","staticRenderFns","components","GoTop","WriteCard","data","imgArr","allType","methods","getAllArticle","getArticleById","window","localStorage","getItem","$message","info","result","computed","filters","handleArticleDateShow","watch","current","console","log","searchArticle","created","getAllType","component","isCardShow","isEnlarge","isMinimize","closeCard","clickHead","$store","state","userInfo","model","newArticleData","callback","$$v","$set","target","composing","isMdLiveShow","addArticle","imgUploadSuccess","imgUploadError","beforeImgUpload","uploadSuccess","uploadError","slot","props","type","Boolean","default","Object","originArticle","articleType","articletitle","articlecontent","$emit","e","file","url","success","error","img","isImg","warning","isImg1M","isBlank","getArticalType","module","exports","date","slice","myDate","Date","currentYear","getFullYear","currentMonth","getMonth","currentDay","getDate","arr","split","parseInt"],"mappings":"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","file":"static/js/chunk-15bc7dd2.96cf7caf.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"communityContainer\"},[_c('div',{staticClass:\"community\"},[_c('div',{staticClass:\"left\"},[_c('div',{staticClass:\"write\"},[_c('el-button',{staticClass:\"writeButton\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.writeArticle}},[_vm._v(\"\\n          写文章\")])],1),_c('div',{staticClass:\"sort\"},[_c('div',{staticClass:\"sortItem\",class:_vm.$route.query.typeId == 0 ? 'currentItem' : '',on:{\"click\":function($event){return _vm.changeType(0)}}},[_c('i',{staticClass:\"iconfont icon-xiaoxi\"}),_vm._v(\"  所有文章\\n        \")]),_vm._l((_vm.allType),function(item,index){return _c('div',{key:index,staticClass:\"sortItem\",class:_vm.$route.query.typeId == item.typeId ? 'currentItem' : '',on:{\"click\":function($event){return _vm.changeType(item.typeId)}}},[_c('i',{staticClass:\"iconfont icon-xiaoxi\"}),_vm._v(\"  \"+_vm._s(item.typeName)+\"\\n        \")])})],2)]),_c('div',{staticClass:\"right\"},[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.isDataLoad),expression:\"isDataLoad\"}],staticClass:\"article\"},_vm._l((_vm.articleList),function(item,index){return _c('div',{key:index,staticClass:\"articleItem\",on:{\"click\":function($event){return _vm.$router.push({ name: 'article', params: { id: item.articleId } })}}},[_c('div',{staticClass:\"userAvatar\"},[_c('img',{attrs:{\"src\":item.avatar && item.avatar != ''\n                  ? item.avatar\n                  : require('assets/img/defaultAvatar.jpg'),\"alt\":\"\",\"lazy\":\"\",\"fit\":\"cover\"}})]),_c('div',{staticClass:\"ItemCenter\"},[_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(item.articleTitle))]),_c('div',{staticClass:\"publishDate\"},[_vm._v(\"\\n              \"+_vm._s(_vm._f(\"handleArticleDateShow\")(item.createTime))+\"\\n            \")]),_c('div',{staticClass:\"content mdContent\",domProps:{\"innerHTML\":_vm._s(_vm.handleMarkDown(item.articleContent))}}),_c('div',{staticClass:\"articleImg\"},[(item.articleImage != '')?_c('img',{staticClass:\"articleImgItem\",attrs:{\"src\":item.articleImage,\"fit\":\"contain\",\"lazy\":\"\"}}):_vm._e()])]),_c('div',{staticClass:\"ItemRight\"},[_c('div',{staticClass:\"replyCount\"},[_c('i',{staticClass:\"iconfont icon-kuaisuhuifu\"}),_vm._v(\"\\n              \"+_vm._s(item.commentNum)+\"\\n            \")])])])}),0),(_vm.articleList.length == 0 && _vm.isDataLoad == false)?_c('div',{staticClass:\"nullTips\"},[_vm._v(\"\\n        Article Not Found !\\n      \")]):_vm._e(),(!_vm.isDataLoad && _vm.articleList.length !== 0)?_c('div',{staticClass:\"bottom\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"layout\":\"prev, pager, next\",\"total\":_vm.totalCount,\"current-page\":this.$route.query.page * 1},on:{\"current-change\":_vm.changePage}})],1):_vm._e()])]),_c('write-card',{attrs:{\"isCardShow\":_vm.isWriteCardShow},on:{\"reFreshArticleList\":_vm.reFreshArticleList,\"closeCard\":function($event){_vm.isWriteCardShow = false}}}),_c('go-top')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"communityContainer\">\r\n    <div class=\"community\">\r\n      <div class=\"left\">\r\n        <div class=\"write\">\r\n          <el-button type=\"primary\" class=\"writeButton\" @click=\"writeArticle\">\r\n            写文章</el-button\r\n          >\r\n        </div>\r\n        <div class=\"sort\">\r\n          <div\r\n            class=\"sortItem\"\r\n            :class=\"$route.query.typeId == 0 ? 'currentItem' : ''\"\r\n            @click=\"changeType(0)\"\r\n          >\r\n            <i class=\"iconfont icon-xiaoxi\"></i>&nbsp;&nbsp;所有文章\r\n          </div>\r\n          <div\r\n            class=\"sortItem\"\r\n            :class=\"$route.query.typeId == item.typeId ? 'currentItem' : ''\"\r\n            v-for=\"(item, index) in allType\"\r\n            :key=\"index\"\r\n            @click=\"changeType(item.typeId)\"\r\n          >\r\n            <i class=\"iconfont icon-xiaoxi\"></i>&nbsp;&nbsp;{{ item.typeName }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"right\">\r\n        <div class=\"article\" v-loading=\"isDataLoad\">\r\n          <div\r\n            class=\"articleItem\"\r\n            v-for=\"(item, index) in articleList\"\r\n            :key=\"index\"\r\n            @click=\"\r\n              $router.push({ name: 'article', params: { id: item.articleId } })\r\n            \"\r\n          >\r\n            <div class=\"userAvatar\">\r\n              <img\r\n                :src=\"\r\n                  item.avatar && item.avatar != ''\r\n                    ? item.avatar\r\n                    : require('assets/img/defaultAvatar.jpg')\r\n                \"\r\n                alt=\"\"\r\n                lazy\r\n                fit=\"cover\"\r\n              />\r\n            </div>\r\n            <div class=\"ItemCenter\">\r\n              <div class=\"title\">{{ item.articleTitle }}</div>\r\n              <div class=\"publishDate\">\r\n                {{ item.createTime | handleArticleDateShow }}\r\n              </div>\r\n              <div\r\n                class=\"content mdContent\"\r\n                v-html=\"handleMarkDown(item.articleContent)\"\r\n              ></div>\r\n              <div class=\"articleImg\">\r\n                <img\r\n                  v-if=\"item.articleImage != ''\"\r\n                  :src=\"item.articleImage\"\r\n                  class=\"articleImgItem\"\r\n                  fit=\"contain\"\r\n                  lazy\r\n                />\r\n              </div>\r\n            </div>\r\n            <div class=\"ItemRight\">\r\n              <div class=\"replyCount\">\r\n                <i class=\"iconfont icon-kuaisuhuifu\"></i>\r\n                {{ item.commentNum }}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          class=\"nullTips\"\r\n          v-if=\"articleList.length == 0 && isDataLoad == false\"\r\n        >\r\n          Article Not Found !\r\n        </div>\r\n\r\n        <div class=\"bottom\" v-if=\"!isDataLoad && articleList.length !== 0\">\r\n          <!-- 分页组件 -->\r\n          <el-pagination\r\n            background\r\n            layout=\"prev, pager, next\"\r\n            :total=\"totalCount\"\r\n            :current-page=\"this.$route.query.page * 1\"\r\n            @current-change=\"changePage\"\r\n          >\r\n          </el-pagination>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 添加文章组件 -->\r\n    <write-card\r\n      :isCardShow=\"isWriteCardShow\"\r\n      @reFreshArticleList=\"reFreshArticleList\"\r\n      @closeCard=\"isWriteCardShow = false\"\r\n    ></write-card>\r\n\r\n    <!-- 返回顶部组件 -->\r\n    <go-top></go-top>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MarkDownIt from \"markdown-it\";\r\n\r\nimport { handleArticleDateShow } from \"plugins/utils.js\";\r\nimport GoTop from \"components/goTop/GoTop.vue\";\r\nimport WriteCard from \"components/writeCard/WriteCard.vue\";\r\n\r\nexport default {\r\n  name: \"community\",\r\n  components: {\r\n    GoTop,\r\n    WriteCard,\r\n  },\r\n  data() {\r\n    return {\r\n      imgArr: [],\r\n      // 文章数据\r\n      articleList: [],\r\n      // 所有分类\r\n      allType: [],\r\n      // 是否显示写文章组件\r\n      isWriteCardShow: false,\r\n      // 总条数\r\n      totalCount: 0,\r\n      // 是否正在加载数据\r\n      isDataLoad: true,\r\n    };\r\n  },\r\n  methods: {\r\n    // 请求\r\n    // 获取所有文章\r\n    async getAllArticle() {\r\n      this.isDataLoad = true;\r\n      let res = await this.$request(\"/dqarticle/superlist\", {\r\n        pageNum: this.$route.query.page,\r\n        pageSize: 10,\r\n      });\r\n      // console.log(res);\r\n      if (res.data.code == 200) {\r\n        // // 查询评论数量\r\n        // res.data.data.list.forEach(async (item, index, arr) => {\r\n        //   let num = await this.getArticleCommentNum(item.articleId);\r\n        //   // console.log(num);\r\n        //   // arr[index].commentNum = num;\r\n        //   // 直接添加属性 vue检测不到 视图不会更新\r\n        //   this.$set(arr[index], \"commentNum\", num);\r\n        // });\r\n\r\n        this.totalCount = res.data.data.total;\r\n        this.articleList = res.data.data.list;\r\n        this.isDataLoad = false;\r\n        // 返回顶部\r\n        window.scrollTo({\r\n          top: 0,\r\n          behavior: \"smooth\",\r\n        });\r\n      }\r\n    },\r\n\r\n    // 获取所有分类\r\n    async getAllType() {\r\n      let res = await this.$request(\"/dqtype/list\", { pageSize: 30 });\r\n      // console.log(res);\r\n      this.allType = res.data.data.list;\r\n    },\r\n\r\n    // 搜索文章\r\n    async searchArticle() {\r\n      this.isDataLoad = true;\r\n      let res = await this.$request(\r\n        `/dqarticle/superlist?articleTitle=${this.$route.query.articleTitle}`,\r\n        { pageNum: 1, pageSize: 10 }\r\n      );\r\n      console.log(res);\r\n      if (res.data.code == 200) {\r\n        this.totalCount = res.data.data.total;\r\n        this.articleList = res.data.data.list;\r\n      } else if (res.data.code == 404) {\r\n        // 未查询到文章\r\n        this.totalCount = 0;\r\n        this.articleList = [];\r\n      }\r\n      this.isDataLoad = false;\r\n    },\r\n\r\n    // 根据类型的id查询文章\r\n    async getArticleById(id) {\r\n      this.isDataLoad = true;\r\n      let res = await this.$request(`/dqarticle/superlist?typeId=${id}`, {\r\n        pageNum: this.$route.query.page,\r\n        pageSize: 10,\r\n      });\r\n      console.log(res);\r\n      if (res.data.code == 200) {\r\n        // // 查询评论数量\r\n        // res.data.data.list.forEach(async (item, index, arr) => {\r\n        //   let num = await this.getArticleCommentNum(item.articleId);\r\n        //   console.log(num);\r\n        //   // arr[index].commentNum = num;\r\n        //   // 直接添加属性 vue检测不到 视图不会更新\r\n        //   this.$set(arr[index], \"commentNum\", num);\r\n        // });\r\n\r\n        this.articleList = res.data.data.list;\r\n        this.totalCount = res.data.data.total;\r\n        this.isDataLoad = false;\r\n        // 返回顶部\r\n        window.scrollTo({\r\n          top: 0,\r\n          behavior: \"smooth\",\r\n        });\r\n      } else if (res.data.code == 404) {\r\n        this.articleList = [];\r\n        this, (this.totalCount = 0);\r\n        this.isDataLoad = false;\r\n      }\r\n    },\r\n\r\n    // 查询当前id的文章的评论总数量\r\n    async getArticleCommentNum(id) {\r\n      if (id == undefined) return;\r\n      let res = await this.$request(`/number/dqarticle/${id}`);\r\n      // console.log(res);\r\n      if (res.data.code == 200) {\r\n        let num = res.data.data;\r\n        return num;\r\n      }\r\n    },\r\n\r\n    // 事件\r\n    // 点击分类的回调\r\n    changeType(id) {\r\n      // 判断是否重复点击\r\n      // if (this.currentTypeId == id) return;\r\n      // this.currentTypeId = id;\r\n      if (this.$route.query.typeId == id) return;\r\n      this.$router.push({ name: \"community\", query: { typeId: id, page: 1 } });\r\n      // this.currentTypeId = this.$route.params.typeId;\r\n      // 清空当前文章列表\r\n      // this.articleList = [];\r\n      // this.currentPage = 1;\r\n      if (id == 0) {\r\n        // 查询全部文章\r\n        this.getAllArticle();\r\n      } else {\r\n        this.getArticleById(id);\r\n      }\r\n    },\r\n\r\n    // 添加文章成功的回调\r\n    // 根据当前分类重新获取文章数据\r\n    reFreshArticleList() {\r\n      if (this.$route.query.typeId == 0) {\r\n        this.getAllArticle();\r\n      } else {\r\n        this.getArticleById(this.$route.query.typeId);\r\n      }\r\n    },\r\n\r\n    // 切换分页的回调\r\n    changePage(e) {\r\n      // console.log(e);\r\n      // this.currentPage = e;\r\n      this.$router.push({\r\n        name: \"community\",\r\n        query: { typeId: this.$route.query.typeId, page: e },\r\n      });\r\n      if (this.$route.query.typeId == 0) {\r\n        // 查询全部文章\r\n        this.getAllArticle();\r\n      } else {\r\n        this.getArticleById(this.$route.query.typeId);\r\n      }\r\n    },\r\n\r\n    // 点击写文章的回调\r\n    writeArticle() {\r\n      // 判断是否登录\r\n      if (!window.localStorage.getItem(\"tokenValue\")) {\r\n        this.$message.info(\"登录后才能发布文章哦!\");\r\n        return;\r\n      }\r\n\r\n      this.isWriteCardShow = true;\r\n    },\r\n\r\n    handleMarkDown(content) {\r\n      let md = new MarkDownIt();\r\n      let result = md.render(content);\r\n      return result;\r\n    },\r\n  },\r\n  computed: {},\r\n  filters: {\r\n    handleArticleDateShow,\r\n  },\r\n  watch: {\r\n    // 这里监听路由的参数 因为index的router-view中的key绑定的是$route.path 所以在community页面中搜索 只是改变了query参数 是监听不到的\r\n    // 但也不能在index的router-view中的key绑定$route.fullPath 不然分页等操作也会导致整个页面的刷新\r\n    \"$route.query\"(current) {\r\n      // console.log(this.$route);\r\n      // 如果存在articlTitle 并且不存在typeId\r\n      if (current.articleTitle && !current.typeId) {\r\n        console.log(current.articleTitle);\r\n        this.searchArticle();\r\n      } else if (current.typeId == 0 && current.page == 1) {\r\n        this.getAllArticle();\r\n      }\r\n    },\r\n  },\r\n  created() {\r\n    // 查询分类\r\n    this.getAllType();\r\n    // 查询文章列表数据\r\n    // typeId==0 全部分类  !typeId 搜索   typeId==id  类型id为id的分类\r\n    if (this.$route.query.typeId == 0) {\r\n      this.getAllArticle();\r\n    } else if (!this.$route.query.typeId) {\r\n      this.searchArticle();\r\n    } else {\r\n      this.getArticleById(this.$route.query.typeId);\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.communityContainer {\r\n  display: flex;\r\n  justify-content: center;\r\n  font-size: 15px;\r\n}\r\n\r\n.community {\r\n  display: flex;\r\n  max-width: 1200px;\r\n  width: 85vw;\r\n}\r\n\r\n.left {\r\n  position: sticky;\r\n  top: 74px;\r\n  padding: 20px 0;\r\n  width: 200px;\r\n  /* 74px+padding上下的20px */\r\n  height: calc(100vh - 114px);\r\n  color: rgb(83, 83, 83);\r\n  font-size: 13px;\r\n}\r\n\r\n.right {\r\n  padding: 10px 20px 20px;\r\n  width: calc(100% - 200px);\r\n}\r\n\r\n.writeButton {\r\n  width: 100%;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.sortItem {\r\n  margin: 15px 0;\r\n  cursor: pointer;\r\n}\r\n\r\n.currentItem {\r\n  color: #18365b;\r\n  font-weight: 600;\r\n}\r\n\r\n.articleItem {\r\n  display: flex;\r\n  position: relative;\r\n  border-bottom: 1px solid #eee;\r\n  padding: 20px 20px 20px;\r\n  cursor: pointer;\r\n  border-radius: 5px;\r\n  transition: all 0.15s;\r\n}\r\n\r\n.articleItem:hover {\r\n  background-color: #f2f6fb;\r\n}\r\n\r\n.userAvatar {\r\n  width: 45px;\r\n}\r\n\r\n.userAvatar img {\r\n  height: 40px;\r\n  width: 40px;\r\n  border-radius: 50%;\r\n}\r\n\r\n.ItemCenter {\r\n  width: 700px;\r\n  margin: 0 10px;\r\n}\r\n\r\n.ItemCenter div {\r\n  margin-bottom: 1px;\r\n  line-height: 18px;\r\n}\r\n\r\n.title {\r\n  color: rgb(43, 43, 43);\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.publishDate {\r\n  color: rgb(136, 136, 136);\r\n  margin: 4px 0;\r\n  font-size: 12px;\r\n}\r\n\r\n.content {\r\n  color: rgb(136, 136, 136);\r\n  font-size: 14px;\r\n  line-height: 19px;\r\n  /* 两行溢出 */\r\n  text-overflow: -o-ellipsis-lastline;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 2;\r\n  line-clamp: 2;\r\n  -webkit-box-orient: vertical;\r\n}\r\n\r\n.articleImg {\r\n  margin: 15px 0 10px;\r\n  display: flex;\r\n  justify-content: start;\r\n}\r\n\r\n.articleImg img {\r\n  border-radius: 5px;\r\n}\r\n\r\n.articleImgItem {\r\n  height: 100px;\r\n  width: auto;\r\n  margin-right: 10px;\r\n}\r\n\r\n.articleImgItem /deep/ .el-image__inner {\r\n  width: unset;\r\n}\r\n\r\n.ItemRight {\r\n  width: 45px;\r\n  font-size: 14px;\r\n  color: rgb(83, 83, 83);\r\n  position: absolute;\r\n  right: 10px;\r\n}\r\n\r\n.tips {\r\n  width: 100%;\r\n  text-align: center;\r\n  font-size: 14px;\r\n  color: rgb(158, 158, 158);\r\n  margin: 20px 0;\r\n}\r\n\r\n.bottom {\r\n  width: 100%;\r\n  text-align: center;\r\n  margin: 40px 0;\r\n}\r\n\r\n.communityContainer /deep/ .el-loading-spinner {\r\n  margin-top: 80px;\r\n}\r\n\r\n.nullTips {\r\n  text-align: center;\r\n  margin-top: 20vh;\r\n  color: #666;\r\n  letter-spacing: 1px;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./community.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./community.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./community.vue?vue&type=template&id=6ec71029&scoped=true&\"\nimport script from \"./community.vue?vue&type=script&lang=js&\"\nexport * from \"./community.vue?vue&type=script&lang=js&\"\nimport style0 from \"./community.vue?vue&type=style&index=0&id=6ec71029&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6ec71029\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WriteCard.vue?vue&type=style&index=0&id=540f6fb3&scoped=true&lang=less&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./community.vue?vue&type=style&index=0&id=6ec71029&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"writeCard\",class:[\n    _vm.isCardShow ? 'showCard' : 'hideCard',\n    _vm.isEnlarge ? 'enlarge' : '',\n    _vm.isMinimize ? 'minimize' : '' ]},[_c('div',{staticClass:\"cardContorl\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isMinimize),expression:\"!isMinimize\"}],staticClass:\"contorlItem\"},[_c('i',{staticClass:\"iconfont icon-zuixiaohua\",on:{\"click\":function($event){_vm.isMinimize = true}}})]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isMinimize),expression:\"!isMinimize\"}],staticClass:\"contorlItem\"},[(!_vm.isEnlarge)?_c('i',{staticClass:\"iconfont icon-fangda\",on:{\"click\":function($event){_vm.isEnlarge = true}}}):_c('i',{staticClass:\"iconfont icon-suoxiao\",on:{\"click\":function($event){_vm.isEnlarge = false}}})]),_c('div',{staticClass:\"contorlItem\"},[_c('i',{staticClass:\"iconfont icon-guanbi1\",on:{\"click\":_vm.closeCard}})])]),_c('div',{staticClass:\"cardHead\",class:_vm.isMinimize ? 'clickAble' : '',on:{\"click\":_vm.clickHead}}),_c('div',{staticClass:\"cardBody\"},[_c('div',{staticClass:\"left\"},[_c('el-image',{attrs:{\"src\":_vm.$store.state.userInfo.avatar\n            ? _vm.$store.state.userInfo.avatar\n            : require('assets/img/defaultAvatar.jpg'),\"fit\":\"cover\"}})],1),_c('div',{staticClass:\"right\"},[_c('div',[_c('el-select',{attrs:{\"placeholder\":\"请选择\",\"size\":\"mini\"},model:{value:(_vm.newArticleData.typeId),callback:function ($$v) {_vm.$set(_vm.newArticleData, \"typeId\", $$v)},expression:\"newArticleData.typeId\"}},_vm._l((_vm.articleType),function(item){return _c('el-option',{key:item.typeId,attrs:{\"label\":item.typeName,\"value\":item.typeId}})}),1),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newArticleData.articleTitle),expression:\"newArticleData.articleTitle\"}],staticClass:\"title\",attrs:{\"placeholder\":\"标题\"},domProps:{\"value\":(_vm.newArticleData.articleTitle)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.newArticleData, \"articleTitle\", $event.target.value)}}})],1),_c('div',{staticClass:\"contentContainer\"},[_c('div',{staticClass:\"contentInput\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newArticleData.articleContent),expression:\"newArticleData.articleContent\"}],staticClass:\"content\",attrs:{\"placeholder\":\"说点什么吧\"},domProps:{\"value\":(_vm.newArticleData.articleContent)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.newArticleData, \"articleContent\", $event.target.value)}}})]),_c('div',{staticClass:\"mdLive\",class:_vm.isMdLiveShow ? 'mdLiveShow' : 'mdLiveHide',domProps:{\"innerHTML\":_vm._s(_vm.handleMarkDown)}})])])]),_c('div',{staticClass:\"cardBottomContorl\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"medium\"},on:{\"click\":_vm.addArticle}},[_vm._v(\"发布\")]),_c('div',{staticClass:\"bottomBtnContainer\"},[_c('el-upload',{attrs:{\"multiple\":\"\",\"action\":\"/xiaopopan/eduoss/fileoss/upload/1413125531471233026?catalogue=/root/drawingBed\",\"show-file-list\":false,\"on-success\":_vm.imgUploadSuccess,\"on-error\":_vm.imgUploadError,\"before-upload\":_vm.beforeImgUpload}},[_c('div',{staticClass:\"bottomBtn\"},[_c('i',{staticClass:\"iconfont icon-tupian\"})])]),_c('el-popover',{attrs:{\"trigger\":\"hover\",\"width\":\"200\"}},[_c('el-upload',{attrs:{\"slot\":\"reference\",\"action\":\"/xiaopopan/eduoss/fileoss/upload/1413125531471233026?catalogue=/root/drawingBed\",\"show-file-list\":false,\"on-success\":_vm.uploadSuccess,\"on-error\":_vm.uploadError,\"before-upload\":_vm.beforeImgUpload},slot:\"reference\"},[_c('div',{staticClass:\"bottomBtn\"},[_vm._v(\"上传封面\")])]),_c('img',{staticClass:\"popoverImg\",attrs:{\"src\":_vm.newArticleData.articleImage,\"alt\":\"\"}})],1),_c('div',{staticClass:\"bottomBtn\",on:{\"click\":function($event){_vm.isMdLiveShow = !_vm.isMdLiveShow}}},[_vm._v(\"\\n        \"+_vm._s(_vm.isMdLiveShow ? \"关闭\" : \"打开\")+\"md效果预览\\n      \")])],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div\r\n    class=\"writeCard\"\r\n    :class=\"[\r\n      isCardShow ? 'showCard' : 'hideCard',\r\n      isEnlarge ? 'enlarge' : '',\r\n      isMinimize ? 'minimize' : '',\r\n    ]\"\r\n  >\r\n    <!-- 卡片的控制区域 -->\r\n    <div class=\"cardContorl\">\r\n      <div class=\"contorlItem\" v-show=\"!isMinimize\">\r\n        <i class=\"iconfont icon-zuixiaohua\" @click=\"isMinimize = true\"></i>\r\n      </div>\r\n      <div class=\"contorlItem\" v-show=\"!isMinimize\">\r\n        <i\r\n          class=\"iconfont icon-fangda\"\r\n          @click=\"isEnlarge = true\"\r\n          v-if=\"!isEnlarge\"\r\n        ></i>\r\n        <i class=\"iconfont icon-suoxiao\" @click=\"isEnlarge = false\" v-else></i>\r\n      </div>\r\n      <div class=\"contorlItem\">\r\n        <i class=\"iconfont icon-guanbi1\" @click=\"closeCard\"></i>\r\n      </div>\r\n    </div>\r\n    <!-- 卡片头部 -->\r\n    <div\r\n      class=\"cardHead\"\r\n      :class=\"isMinimize ? 'clickAble' : ''\"\r\n      @click=\"clickHead\"\r\n    ></div>\r\n    <!-- 卡片body -->\r\n    <div class=\"cardBody\">\r\n      <div class=\"left\">\r\n        <el-image\r\n          :src=\"\r\n            $store.state.userInfo.avatar\r\n              ? $store.state.userInfo.avatar\r\n              : require('assets/img/defaultAvatar.jpg')\r\n          \"\r\n          fit=\"cover\"\r\n        />\r\n      </div>\r\n      <div class=\"right\">\r\n        <div>\r\n          <el-select\r\n            v-model=\"newArticleData.typeId\"\r\n            placeholder=\"请选择\"\r\n            size=\"mini\"\r\n          >\r\n            <el-option\r\n              v-for=\"item in articleType\"\r\n              :key=\"item.typeId\"\r\n              :label=\"item.typeName\"\r\n              :value=\"item.typeId\"\r\n            >\r\n            </el-option>\r\n          </el-select>\r\n          <input\r\n            class=\"title\"\r\n            placeholder=\"标题\"\r\n            v-model=\"newArticleData.articleTitle\"\r\n          />\r\n        </div>\r\n        <div class=\"contentContainer\">\r\n          <div class=\"contentInput\">\r\n            <textarea\r\n              class=\"content\"\r\n              placeholder=\"说点什么吧\"\r\n              v-model=\"newArticleData.articleContent\"\r\n            ></textarea>\r\n            <!-- <el-image\r\n              :src=\"'/imgreq' + newArticleData.articleImage.split('.com')[1]\"\r\n              fit=\"contain\"\r\n              class=\"articleCover\"\r\n            ></el-image> -->\r\n          </div>\r\n          <!-- markdown展示框 -->\r\n          <div\r\n            class=\"mdLive\"\r\n            :class=\"isMdLiveShow ? 'mdLiveShow' : 'mdLiveHide'\"\r\n            v-html=\"handleMarkDown\"\r\n          ></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- 卡片底部控制栏 -->\r\n    <div class=\"cardBottomContorl\">\r\n      <el-button type=\"primary\" size=\"medium\" @click=\"addArticle\"\r\n        >发布</el-button\r\n      >\r\n      <div class=\"bottomBtnContainer\">\r\n        <!-- 图片上传 -->\r\n        <el-upload\r\n          multiple\r\n          action=\"/xiaopopan/eduoss/fileoss/upload/1413125531471233026?catalogue=/root/drawingBed\"\r\n          :show-file-list=\"false\"\r\n          :on-success=\"imgUploadSuccess\"\r\n          :on-error=\"imgUploadError\"\r\n          :before-upload=\"beforeImgUpload\"\r\n        >\r\n          <div class=\"bottomBtn\">\r\n            <i class=\"iconfont icon-tupian\"></i>\r\n          </div>\r\n        </el-upload>\r\n        <!-- 封面上传 -->\r\n        <el-popover trigger=\"hover\" width=\"200\">\r\n          <el-upload\r\n            action=\"/xiaopopan/eduoss/fileoss/upload/1413125531471233026?catalogue=/root/drawingBed\"\r\n            :show-file-list=\"false\"\r\n            :on-success=\"uploadSuccess\"\r\n            :on-error=\"uploadError\"\r\n            :before-upload=\"beforeImgUpload\"\r\n            slot=\"reference\"\r\n          >\r\n            <div class=\"bottomBtn\">上传封面</div>\r\n          </el-upload>\r\n          <img :src=\"newArticleData.articleImage\" alt=\"\" class=\"popoverImg\" />\r\n        </el-popover>\r\n        <div class=\"bottomBtn\" @click=\"isMdLiveShow = !isMdLiveShow\">\r\n          {{ isMdLiveShow ? \"关闭\" : \"打开\" }}md效果预览\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MarkDownIt from \"markdown-it\";\r\n\r\nexport default {\r\n  name: \"writeCard\",\r\n  props: {\r\n    // 是否显示卡片\r\n    isCardShow: {\r\n      type: Boolean,\r\n      default() {\r\n        return false;\r\n      },\r\n    },\r\n    // 用户信息\r\n    userInfo: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      },\r\n    },\r\n    // 原有文章 用于文章修改\r\n    originArticle: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      },\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      // 是否放大\r\n      isEnlarge: false,\r\n      // 是否最小化\r\n      isMinimize: false,\r\n      // 新建文章的数据\r\n      newArticleData: {\r\n        typeId: null,\r\n        articleTitle: \"\",\r\n        articleContent: \"\",\r\n        articleImage:\r\n          \"https://chen110.oss-cn-guangzhou.aliyuncs.com/2021/08/03/wallhaven-4ooz99.jpg\",\r\n      },\r\n      // 文章分类\r\n      articleType: [],\r\n      // 是否实时显示markdown效果\r\n      isMdLiveShow: false,\r\n    };\r\n  },\r\n  methods: {\r\n    // 请求\r\n    async addArticle() {\r\n      // 先判断是否有数据没填\r\n      if (this.newArticleData.typeId == null) {\r\n        this.$message.warning(\"请选择文章分类哦!\");\r\n        return;\r\n      } else if (this.newArticleData.articleTitle == \"\") {\r\n        this.$message.warning(\"请填写文章标题哦!\");\r\n        return;\r\n      } else if (this.newArticleData.articleContent == \"\") {\r\n        this.$message.warning(\"请填写文章内容哦!\");\r\n        return;\r\n      } else if (this.newArticleData.articleImage == \"\") {\r\n        this.$message.warning(\"请上传背景图片哦!\");\r\n        return;\r\n      }\r\n\r\n      let res;\r\n      // 如果是修改，判断内容是否有改变\r\n      if (this.originArticle.articleId) {\r\n        if (\r\n          this.newArticleData.typeId == this.originArticle.typeId &&\r\n          this.newArticleData.articleTitle == this.originArticle.articleTitle &&\r\n          this.newArticleData.articleContent ==\r\n            this.originArticle.articleContent &&\r\n          this.newArticleData.articleImage == this.originArticle.articleImage\r\n        ) {\r\n          this.$message.warning(\"文章没有改动哦!\");\r\n          return;\r\n        }\r\n\r\n        // 发送修改请求\r\n        res = await this.$request(\r\n          \"/dqarticle/update\",\r\n          this.newArticleData,\r\n          \"post\"\r\n        );\r\n      } else {\r\n        res = await this.$request(\r\n          \"/dqarticle/add\",\r\n          this.newArticleData,\r\n          \"post\"\r\n        );\r\n      }\r\n\r\n      console.log(res);\r\n      if (res.data.code == 200) {\r\n        // 让父组件更新数据\r\n        this.$emit(\"reFreshArticleList\");\r\n        // 关闭当前组件\r\n        this.closeCard();\r\n      } else if (res.data.data == \"登陆无效\") {\r\n        // token失效了 清空token 和 vuex中的用户信息\r\n        window.localStorage.removeItem(\"tokenValue\");\r\n        this.$store.commit(\"updateUserInfo\", {});\r\n        this.$message.info(\"登录失效,请重新登录后重试!\");\r\n        return;\r\n      }\r\n    },\r\n\r\n    // 获取文章分类\r\n    async getArticalType() {\r\n      let res = await this.$request(\"/dqtype/list\", { pageSize: 30 });\r\n      console.log(res);\r\n      this.articleType = res.data.data.list;\r\n    },\r\n\r\n    // 事件\r\n    // 点击卡片头部的回调\r\n    clickHead() {\r\n      if (this.isMinimize) {\r\n        this.isMinimize = false;\r\n      }\r\n    },\r\n\r\n    // 点击关闭卡片的回调\r\n    closeCard() {\r\n      // 重置所有数据\r\n      this.isEnlarge = false;\r\n      this.isMinimize = false;\r\n      this.isMdLiveShow = false;\r\n      if (!this.originArticle.articleId) {\r\n        this.newArticleData = {\r\n          typeId: null,\r\n          articletitle: \"\",\r\n          articlecontent: \"\",\r\n          articleImage:\r\n            \"https://chen110.oss-cn-guangzhou.aliyuncs.com/2021/08/03/wallhaven-4ooz99.jpg\",\r\n        };\r\n      } else {\r\n        this.newArticleData.typeId = this.originArticle.typeId;\r\n        this.newArticleData.articleTitle = this.originArticle.articleTitle;\r\n        this.newArticleData.articleContent = this.originArticle.articleContent;\r\n        this.newArticleData.articleImage = this.originArticle.articleImage;\r\n        this.newArticleData.articleId = this.originArticle.articleId;\r\n      }\r\n      this.$emit(\"closeCard\");\r\n    },\r\n\r\n    // 封面上传成功的回调\r\n    uploadSuccess(e) {\r\n      console.log(e);\r\n      this.newArticleData.articleImage = e.data.file.url;\r\n      this.$message.success(\"封面上传成功!\");\r\n    },\r\n\r\n    // 封面上传失败的回调\r\n    uploadError(e) {\r\n      console.log(e);\r\n      this.$message.error(\"封面上传失败, 请稍后重试!\");\r\n    },\r\n\r\n    // 文章图片上传成功的回调\r\n    imgUploadSuccess(e) {\r\n      // console.log(e);\r\n      let img = `![${e.data.file.name}](${e.data.file.url} \"${e.data.file.name}\")   `;\r\n      this.newArticleData.articleContent += img;\r\n    },\r\n\r\n    // 文章图片上传失败的回调\r\n    imgUploadError(e) {\r\n      // console.log(e);\r\n      this.$message.error(\"图片上传失败, 请稍后重试!\");\r\n    },\r\n\r\n    // 图片上传前的回调\r\n    beforeImgUpload(file) {\r\n      // console.log(file);\r\n      // 上传的图片不能超过 1m\r\n      const isImg1M = file.size / 1024 / 1024 <= 1;\r\n      const isImg =\r\n        file.type === \"image/jpeg\" ||\r\n        file.type === \"image/png\" ||\r\n        file.type === \"image/bmp\";\r\n      const isBlank = file.name.split(\" \").length > 1;\r\n\r\n      if (!isImg) {\r\n        this.$message.warning(\"上传的图片只能是 JPG/PNG/BMP 格式!\");\r\n      }\r\n      if (!isImg1M) {\r\n        this.$message.warning(\"上传的图片大小不能超过 1MB 哦!\");\r\n      }\r\n      // 判断上传的图片是否存在空格\r\n      if (isBlank) {\r\n        this.$message.warning(\"上传的图片名不能包含空格哦!\");\r\n      }\r\n      // 返回false可以阻止图片上传\r\n      return isImg && isImg1M && !isBlank;\r\n    },\r\n  },\r\n\r\n  created() {\r\n    this.getArticalType();\r\n  },\r\n\r\n  watch: {\r\n    isCardShow(current) {\r\n      if (current && this.originArticle.articleId) {\r\n        this.newArticleData.typeId = this.originArticle.typeId;\r\n        this.newArticleData.articleTitle = this.originArticle.articleTitle;\r\n        this.newArticleData.articleContent = this.originArticle.articleContent;\r\n        this.newArticleData.articleImage = this.originArticle.articleImage;\r\n        this.newArticleData.articleId = this.originArticle.articleId;\r\n      }\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    handleMarkDown() {\r\n      if (this.isMdLiveShow) {\r\n        const md = new MarkDownIt();\r\n        const result = md.render(this.newArticleData.articleContent);\r\n\r\n        return `<div class=\"mdTips\">md效果预览:</div>` + result;\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.writeCard {\r\n  background-color: white;\r\n  position: fixed;\r\n  z-index: 3100;\r\n  left: calc(50vw - 435px);\r\n  bottom: -300px;\r\n  height: 300px;\r\n  width: 870px;\r\n  transition: all 0.4s ease;\r\n  border-top-right-radius: 10px;\r\n  border-top-left-radius: 10px;\r\n  overflow: hidden;\r\n  box-shadow: 0 -10px 25px -5px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.showCard {\r\n  bottom: 0px;\r\n}\r\n\r\n.minimize {\r\n  bottom: -260px;\r\n}\r\n\r\n.hideCard {\r\n  bottom: -320px;\r\n}\r\n\r\n.enlarge {\r\n  width: 100%;\r\n  height: 100%;\r\n  bottom: 0;\r\n  left: 0;\r\n  border-radius: 0;\r\n}\r\n\r\n.cardContorl {\r\n  position: absolute;\r\n  right: 8px;\r\n  top: 3px;\r\n  display: flex;\r\n}\r\n\r\n.contorlItem {\r\n  margin: 10px 12px;\r\n  cursor: pointer;\r\n  color: rgb(121, 121, 121);\r\n}\r\n\r\n.cardHead {\r\n  height: 40px;\r\n  width: 100%;\r\n}\r\n\r\n.clickAble {\r\n  cursor: pointer;\r\n}\r\n\r\n.cardBody {\r\n  display: flex;\r\n  padding: 0 20px;\r\n  height: calc(100% - 100px);\r\n  box-sizing: border-box;\r\n}\r\n\r\n.left {\r\n  width: 80px;\r\n}\r\n\r\n.left .el-image {\r\n  width: 70px;\r\n  height: 70px;\r\n  border-radius: 50%;\r\n}\r\n\r\n.right {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 0 10px;\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n\r\n.title,\r\n.content,\r\n.title:focus,\r\n.content:focus {\r\n  border: none;\r\n  outline: none;\r\n  margin: 10px 0;\r\n  color: rgb(34, 34, 34);\r\n}\r\n\r\n.content {\r\n  word-break: break-all;\r\n}\r\n\r\n.title {\r\n  font-size: 16px;\r\n  letter-spacing: 1px;\r\n  width: calc(100% - 180px);\r\n}\r\n\r\n.contentContainer {\r\n  display: flex;\r\n  height: 80%;\r\n}\r\n\r\n.contentInput {\r\n  position: relative;\r\n  flex: 1;\r\n}\r\n\r\n.content {\r\n  line-height: 22px;\r\n  letter-spacing: 0.8px;\r\n  resize: none;\r\n  height: calc(100% - 30px);\r\n  width: 100%;\r\n  font-size: 15px;\r\n}\r\n\r\n.contentContainer .el-image {\r\n  width: 100px;\r\n  margin-left: 20px;\r\n  cursor: pointer;\r\n}\r\n\r\n.cardBottomContorl {\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  border-top: 1px solid #ddd;\r\n  padding: 10px 20px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.el-select {\r\n  width: 120px;\r\n  margin-right: 20px;\r\n}\r\n\r\n.el-select:focus,\r\n.el-select /deep/ .el-input__inner:focus,\r\n.el-select /deep/ .el-input.is-focus .el-input__inner {\r\n  border-color: inherit;\r\n}\r\n\r\n.el-select-dropdown__item.selected {\r\n  color: #355a86;\r\n}\r\n\r\n.articleCover {\r\n  position: absolute;\r\n  right: 5%;\r\n  bottom: 0;\r\n}\r\n\r\n.mdLive {\r\n  height: 100%;\r\n  transition: all 0.5s ease;\r\n  border-left: 1px solid #ddd;\r\n  margin-left: 10px;\r\n}\r\n\r\n.mdLiveHide {\r\n  position: relative;\r\n  left: 35px;\r\n}\r\n\r\n.mdLiveShow {\r\n  flex: 1;\r\n  box-sizing: border-box;\r\n  padding-left: 15px;\r\n  overflow: scroll;\r\n}\r\n\r\n.bottomBtn {\r\n  font-size: 13px;\r\n  color: rgb(122, 122, 122);\r\n  cursor: pointer;\r\n  margin: 0 10px;\r\n  user-select: none;\r\n}\r\n\r\n.bottomBtnContainer {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.popoverImg {\r\n  width: 100%;\r\n  z-index: 10000;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WriteCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WriteCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WriteCard.vue?vue&type=template&id=540f6fb3&scoped=true&\"\nimport script from \"./WriteCard.vue?vue&type=script&lang=js&\"\nexport * from \"./WriteCard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./WriteCard.vue?vue&type=style&index=0&id=540f6fb3&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"540f6fb3\",\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"static/img/defaultAvatar.16a68dc4.jpg\";","// 处理文章时间显示\r\nexport function handleArticleDateShow(date) {\r\n  if (date == null) return 'Unknown time'\r\n  date = date.slice(0, 10)\r\n\r\n  let myDate = new Date();\r\n  let currentYear = myDate.getFullYear()\r\n  let currentMonth = myDate.getMonth() + 1\r\n  let currentDay = myDate.getDate()\r\n\r\n  let arr = date.split('-')\r\n  arr[0] = parseInt(arr[0])\r\n  arr[1] = parseInt(arr[1])\r\n  arr[2] = parseInt(arr[2])\r\n\r\n  // 判断是否是今天\r\n  if (arr[0] == currentYear && arr[1] == currentMonth && arr[2] == currentDay) {\r\n    return '今天'\r\n  }\r\n\r\n  if (arr[0] == currentYear) {\r\n    return arr[1] + '月' + arr[2] + '日'\r\n  } else {\r\n    return arr[0] + '年' + arr[1] + '月' + arr[2] + '日'\r\n  }\r\n}"],"sourceRoot":""}